<link rel="import" 
  href="../polymer/polymer.html">
<polymer-element name="uml-element" attributes="name">
  <template>
    <content></content>
  </template>
  <script>
function UmlElement(customElm) {
	// Properties
	this.webComponent = customElm;
	this.elementType = customElm.localName;
	this.simpleName = customElm.name;
	// Functions assignations
	this.getParentElement = getParentElement;
	this.getQualifiedName = getQualifiedName;
	if(!this.webComponent.id) {
		this.webComponent.id = this.getQualifiedName();
	}
	this.webComponent.umlElement = this;
	
	// Functions declarations
	function getParentElement() {
		var parentUmlElement;
		var domParent = this.webComponent.parentNode;
		while(
			(domParent)
			&&(!domParent.name)
			&&(domParent.parentNode)
		) {
			domParent = domParent.parentNode;
		}
		if(
				(domParent)
				&&(domParent.name)
		) {
			parentUmlElement = new UmlElement(domParent);
		}
		return parentUmlElement;
	}
	function getQualifiedName() {
		var umlParent = this.getParentElement();
		if(umlParent) {
			if(umlParent.elementType == 'uml-model') {
				var parentQualified = umlParent.getQualifiedName();
				return parentQualified + '->' + this.simpleName;
			}
			else {
				var parentQualified = umlParent.getQualifiedName();
				return parentQualified + '.' + this.simpleName;
			}
		}
		else {
			return this.simpleName;
		}
	}
}
Polymer('uml-element', { 
	ready: function() {
		new UmlElement(this);
	}
});
  </script>
</polymer-element>